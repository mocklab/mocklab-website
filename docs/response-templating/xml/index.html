

<!doctype html>
<html lang="en" class="no-js">
  <head>
    <!-- start Mixpanel --><script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
mixpanel.init('71b55ac57b47107ca89d12dc7c75cf00', {
    loaded: function(mixpanel) {
        distinct_id = mixpanel.get_distinct_id();
    }
});</script><!-- end Mixpanel -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    

<meta charset="utf-8">



<!-- begin SEO -->









<title>Response Templating - Working with XML | MockLab</title>







<meta name="description" content="Working with XML">

<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="MockLab">
<meta property="og:title" content="Response Templating - Working with XML">




  <meta property="og:description" content="Working with XML">



  <meta property="keywords" content="">





  

  



  <meta property="og:image" content="https://www.mocklab.io/images/mocklab_logo_with_text_large.png">



  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2020-10-12T17:39:46+01:00">
  
    <link rel="next" href="/docs/security/" title="Security">
  
  
    <link rel="prev" href="/docs/response-templating/string-helpers/" title="Response Templating - String Helpers">
  



  <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "Organization",
      "url": null,
      "logo": "/images/https://www.mocklab.io/images/mocklab_logo_with_text_large.png"
    }
  </script>



  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "",
      "url" : null,
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="MockLab Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<link href="https://fonts.googleapis.com/css?family=Cairo:300" rel="stylesheet">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<link rel="shortcut icon" type="image/x-icon" href="/images/favicon.png">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@1/dist/instantsearch.min.css" />
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.0/dist/instantsearch-theme-algolia.min.css">

    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body>
    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<nav class="header-nav sticky">
  <ul class="header-nav__container">
    <li class="header-nav__logo">
        <a href="https://get.mocklab.io">
            <img src="/images/mocklab_logo_with_text.png" title="MockLab logo"/>
        </a>
    </li>

    <li class="header-nav__item">
        <a href="/docs/getting-started/" title="Docs">Docs</a>
    </li>
    <li class="header-nav__item">
        <a href="/blog/" title="Docs">Blog</a>
    </li>
    <li class="header-nav__item">
        <a href="https://get.mocklab.io/pricing" title="Docs">Pricing</a>
    </li>
    <li class="header-nav__item header-nav__item--last">
        <a href="https://app.mocklab.io" title="Login" target="_blank">Login</a>
    </li>

    <li class="header-nav__cta">
        <a href="https://app.mocklab.io/login?for=signup" title="Sign up" target="_blank">Sign up</a>
    </li>
  </ul>

</nav>

    

<div id="main" role="main">
  

<div class="sidebar sticky">
  <nav class="nav__list">
    <ul class="doc-categories">
      
        <li class="doc-category">
          <span class="doc-category__title">Setup & Configuration</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="/docs/getting-started/">

                
                Getting Started
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/security/">

                
                Security
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Stubbing</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="/docs/stubbing/">

                
                 Basics
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/advanced-stubbing/">

                
                Advanced 
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/delays/">

                
                Response Delays
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/simulating-faults/">

                
                Simulating Faults
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/stateful-scenarios/">

                
                Simulating State with Scenarios
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/proxying/">

                
                Proxying
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/soap-stubbing/">

                
                Working with SOAP
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Request Matching</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="/docs/request-matching/matcher-types/">

                
                Overview of Matcher Types
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/request-matching/url/">

                
                Matching URLs
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/request-matching/json/">

                
                Matching JSON requests
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/request-matching/xml/">

                
                Matching XML bodies
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Response Templating</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="/docs/response-templating/basics/">

                
                Basics
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/response-templating/conditional-logic-and-iteration/">

                
                Conditional Logic and Iteration
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/response-templating/string-helpers/">

                
                String Helpers
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/response-templating/string-encodings/">

                
                String Encodings
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/response-templating/dates-and-times/">

                
                Dates and Times
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/response-templating/random-values/">

                
                Random Values
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/response-templating/xml/" class="nav__list-item--selected">
                

                
                Working with XML
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/response-templating/json/">

                
                Working with JSON
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/response-templating/jwt/">

                
                JSON Web Tokens (JWT)
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/response-templating/misc-helpers/">

                
                Miscellaneous Helpers
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Import & Export</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="/docs/swagger/">

                
                Swagger Import
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/import-and-export/">

                
                How to: Import and export your mock API
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Record & Playback</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="/docs/recording-stubs/">

                
                Recording Stubs
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Policies</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="/docs/terms-and-conditions/">

                
                MockLab Terms of Service
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/privacy-policy/">

                
                Privacy Policy
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">Tutorials</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="/docs/exploratory-testing-tutorial/">

                
                Exploratory Testing a Spring Boot App
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/automated-testing-with-java/">

                
                Automated Testing with Java
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/default-responses/">

                
                Serving a Default Response
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/oauth2-mock/">

                
                The OAuth2 / OpenID Connect Mock
                </a>
              </li>
            
          </ul>
        </li>
      
        <li class="doc-category">
          <span class="doc-category__title">API References</span>
          <ul class="doc-category__links">
            
              
              
              <li>
                <a href="/docs/mocking/">

                
                API Reference: Mocking
                </a>
              </li>
            
              
              
              <li>
                <a href="/docs/provisioning/">

                
                API Reference: Provisioning
                </a>
              </li>
            
          </ul>
        </li>
      
    </ul>

  </nav>
</div>


  <article class="doc-page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Response Templating - Working with XML">
    <meta itemprop="description" content="This article describes MockLab’s helpers for processing and manipulating XML.">
    <meta itemprop="datePublished" content="October 12, 2020">
    

    <div class="page__inner-wrap">
      <header>
        <h1 class="page__title" itemprop="headline">Response Templating - Working with XML
</h1>
      </header>
      <section class="page__content" itemprop="text">
        <p>This article describes MockLab’s helpers for processing and manipulating XML.</p>

<h2 id="xpath">XPath</h2>

<p>The <code class="language-plaintext highlighter-rouge">xPath</code> helper can be used to extract values or sub documents via an XPath 1.0 expression from an XML string.
Most commonly this is used to extract values from the request body.</p>

<p>For example, given a request body of:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;outer&gt;</span>
    <span class="nt">&lt;inner&gt;</span>Stuff<span class="nt">&lt;/inner&gt;</span>
<span class="nt">&lt;/outer&gt;</span>
</code></pre></div></div>

<p>The following will render “Stuff” into the output:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{{</span><span class="nv">xPath</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'/outer/inner/text()'</span><span class="k">}}}</span>
</code></pre></div></div>

<p>And given the same XML the following will render <code class="language-plaintext highlighter-rouge">&lt;inner&gt;Stuff&lt;/inner&gt;</code>:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{{</span><span class="nv">xPath</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'/outer/inner'</span><span class="k">}}}</span>
</code></pre></div></div>

<h3 id="extracting-attributes">Extracting attributes</h3>

<p>XPath also permits extraction of attributes e.g. for a request body of:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;outer&gt;</span>
    <span class="nt">&lt;inner</span> <span class="na">id=</span><span class="s">"123"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/outer&gt;</span>
</code></pre></div></div>

<p>The following will render “123” into the output:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{{</span><span class="nv">xPath</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'/outer/inner/@id'</span><span class="k">}}}</span>
</code></pre></div></div>

<h2 id="soap-xpath">SOAP XPath</h2>

<p>As a convenience the <code class="language-plaintext highlighter-rouge">soapXPath</code> helper also exists for extracting values from SOAP bodies e.g. for the SOAP document:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;soap:Envelope</span> <span class="na">xmlns:soap=</span><span class="s">"http://www.w3.org/2003/05/soap-envelope/"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;soap:Body&gt;</span>
        <span class="nt">&lt;m:a&gt;</span>
            <span class="nt">&lt;m:test&gt;</span>success<span class="nt">&lt;/m:test&gt;</span>
        <span class="nt">&lt;/m:a&gt;</span>
    <span class="nt">&lt;/soap:Body&gt;</span>
<span class="nt">&lt;/soap:Envelope&gt;</span>
</code></pre></div></div>

<p>The following will render “success” in the output:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{{</span><span class="nv">soapXPath</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'/a/test/text()'</span><span class="k">}}}</span>
</code></pre></div></div>

<h2 id="iterating-over-xml-elements">Iterating over XML elements</h2>

<p>The <code class="language-plaintext highlighter-rouge">xPath</code> helper returns “one or many” collections results, which can either
be printed directly, or passed to further helpers such as <a href="/docs/response-templating/conditional-logic-and-iteration/#iteration"><code class="language-plaintext highlighter-rouge">each</code></a> or <a href="/docs/response-templating/string-helpers/#join"><code class="language-plaintext highlighter-rouge">join</code></a>.</p>

<p>For instance, given a request body of the form:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;stuff&gt;</span>
    <span class="nt">&lt;thing&gt;</span>One<span class="nt">&lt;/thing&gt;</span>
    <span class="nt">&lt;thing&gt;</span>Two<span class="nt">&lt;/thing&gt;</span>
    <span class="nt">&lt;thing&gt;</span>Three<span class="nt">&lt;/thing&gt;</span>
<span class="nt">&lt;/stuff&gt;</span>
</code></pre></div></div>

<p>and the following template:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{#</span><span class="nn">each</span> <span class="p">(</span><span class="nv">xPath</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'/stuff/thing'</span><span class="p">)</span> <span class="nv">as</span> <span class="p">|</span><span class="nv">element</span><span class="p">|</span><span class="k">}}{{{</span><span class="nv">element</span><span class="p">.</span><span class="nv">text</span><span class="k">}}}</span> <span class="k">{{/</span><span class="nn">each</span><span class="k">}}</span>
</code></pre></div></div>

<p>the resulting output will be:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>One Two Three
</code></pre></div></div>

<h3 id="xml-element-attributes">XML element attributes</h3>

<p>Elements in the collection returned by <code class="language-plaintext highlighter-rouge">xPath</code> have the following properties:</p>

<p><code class="language-plaintext highlighter-rouge">text</code>: The text content of the element.</p>

<p><code class="language-plaintext highlighter-rouge">name</code>: The element’s name.</p>

<p><code class="language-plaintext highlighter-rouge">attributes</code>: A map of attribute names and values e.g. given an XML element has
been selected:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;thing</span> <span class="na">id=</span><span class="s">"123"</span> <span class="na">position=</span><span class="s">"top"</span><span class="nt">/&gt;</span>
</code></pre></div></div>

<p>Its attributes can be referenced:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      ID: <span class="k">{{{</span><span class="nv">element</span><span class="p">.</span><span class="nv">attributes</span><span class="p">.</span><span class="nv">id</span><span class="k">}}}</span>
Position: <span class="k">{{{</span><span class="nv">element</span><span class="p">.</span><span class="nv">attributes</span><span class="p">.</span><span class="nv">position</span><span class="k">}}}</span>
</code></pre></div></div>


        
      </section>

      <footer class="page__meta">
        
        




      </footer>

      
    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<nav class="page__footer-links">
  <div class="page__footer-links-block">
    <ul>
      <li>&copy; 2020 MockLab</li>
      <li><a href="mailto:info@mocklab.io">info@mocklab.io</a></li>
    </ul>
  </div>

  <div class="page__footer-links-block">
    <h3>Help</h3>
    <ul>
      <li><a href="/docs/getting-started/">Docs</a></li>
      <li><a href="/docs/getting-started/">Blog</a></li>
      <li><a href="https://get.mocklab.io/pricing">Pricing</a></li>
    </ul>
  </div>

  <div class="page__footer-links-block">
    <h3>Solutions</h3>
    <ul>
      <li><a href="/oauth2/">OAuth2</a></li>
    </ul>
  </div>

  <div class="page__footer-links-block">
    <h3>Policies</h3>
    <ul>
      <li><a href="/docs/terms-and-conditions/">Terms and conditions</a></li>
      <li><a href="/docs/privacy-policy/">Privacy policy</a></li>
    </ul>
  </div>

  <div class="page__footer-links-block">
    <ul>

    </ul>
  </div>
</nav>

      </footer>
    </div>

    <script src="/assets/js/main.min.js"></script>




  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-78148205-6', 'auto');
  ga('send', 'pageview');
</script>




<script>
    window.intercomSettings = {
        app_id: "xjme6u4w"
    };
</script>
<script>(function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/xjme6u4w';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()</script>


  </body>
</html>

